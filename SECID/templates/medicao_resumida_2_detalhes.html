{% extends "base.html" %}
<style>
    /* Garante que a barra de rolagem esteja sempre disponível */
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow-y: auto; /* Garante a barra de rolagem vertical */
    }

    .container {
        margin: 0 auto;
        padding: 20px;
    }

    .p-4 {
        overflow-y: auto; /* Ativa rolagem interna se necessário */
    }
</style>
{% block body %}
<div class="container" style="background: rgba(255, 255, 255, 0.85); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px;">
    <h1>Selecione a Obra para Alteração</h1>
    <ul class="list-group">
        {% for obra in obras %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ obra.obra }} - {{ obra.contrato }} - {{ obra.sei }}
                <a href="{{ url_for('medicao_resumida_2_detalhes', id=obra.id) }}" class="btn btn-primary btn-sm">Selecionar</a>
            </li>
        {% endfor %}
    </ul>
</div>

<div class="container mt-4" style="background: rgba(255, 255, 255, 0.85); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px;">
    <h2>Medições Resumidas</h2>
    <form method="POST" action="{{ url_for('salvar_alteracoes') }}">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Data Inicial</th>
                    <th>Data Final</th>
                    <th>Número</th>
                    <th>Valor</th>
                    <th>Letra</th>
                    <th>Reajustamento</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for item in medicao_resumida %}
                <tr>
                    <td>{{ item.id }}</td>
                    <td><input type="date" name="data_inicio_{{ item.id }}" value="{{ item.data_inicio_medicao }}"></td>
                    <td><input type="date" name="data_fim_{{ item.id }}" value="{{ item.data_fim_medicao }}"></td>
                    <td><input type="number" name="numero_{{ item.id }}" value="{{ item.numero_medicao }}"></td>
                    <td><input type="text" name="valor_{{ item.id }}" value="{{ item.valor_medicao | round(2) }}"></td>
                    <td><input type="text" name="letra_{{ item.id }}" value="{{ item.letra_medicao }}"></td>
                    <td><input type="text" name="reajustamento_{{ item.id }}" value="{{ item.reajustamento | round(2) }}"></td>
                    <td>
                        <button type="submit" class="btn btn-success btn-sm">Salvar Alterações</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}
